<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
  <title>统一启动器</title>
  <meta name="description" content="统一启动器 - 快速访问各种服务">
  <meta name="theme-color" content="#667eea">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="index.css">
</head>
<body>
<!-- 主要内容容器 - 液态玻璃效果 -->
<div class="glass-container">
  <div class="welcome">
<div class="header-flex" style="display: flex; align-items: center; justify-content: center; gap: 1rem;">
  <img src="icons/icon.png" alt="统一启动器图标" width="128" height="128">
  <h1>统一启动器</h1>
</div>
    <p>请选择一个服务开始</p>
  </div>

  <div class="button-group main">
    <a class="btn primary" href="http://192.168.0.197:3010">记账</a>
    <a class="btn primary" href="http://192.168.0.197:3000">记账（国际版）</a>
    <a class="btn primary" href="http://192.168.0.197:3100">金流</a>
    <a class="btn primary" href="http://192.168.0.197:5000">库存</a>
  </div>
</div>

<!-- 工具容器 - 液态玻璃效果 -->
<div class="glass-container">
  <div class="button-group primary">
    <button class="btn primary" id="check-service" onclick="window.location.href='./component/check-service/index.html'">服务可用性</button>
    <button class="btn primary" id="check-compatibility" onclick="window.location.href='./component/compatibility-check/browser.html'">检查兼容性</button>
    <button class="btn primary" id="rate" onclick="window.location.href='./component/exchange-rate/rate.html'">汇率计算器</button>
    <button class="btn primary" id="store" onclick="window.location.href='app-store.html'">安卓应用商店</button>
  </div>
</div>

<div>
  <br>
  <small id="user-agent"></small>
</div>

<!-- 自定义弹窗HTML结构 -->
<div id="customModal" class="custom-modal">
  <div class="custom-modal-content">
    <div class="custom-modal-header">
      <h3 class="custom-modal-title" id="modalTitle">提示</h3>
    </div>
    <div class="custom-modal-body">
      <p id="modalMessage">消息内容</p>
    </div>
    <div class="custom-modal-footer">
      <button id="modalCloseBtn" class="custom-modal-button">确定</button>
    </div>
  </div>
</div>

<script>
  
  document.getElementById('user-agent').textContent = navigator.userAgent;
  
  // 自定义弹窗函数
  function showModal(title, message) {
    const modal = document.getElementById('customModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalMessage = document.getElementById('modalMessage');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    
    // 确保弹窗元素存在
    if (!modal || !modalTitle || !modalMessage || !modalCloseBtn) {
      console.error('弹窗元素未找到');
      return;
    }
    
    // 设置弹窗内容
    modalTitle.textContent = title || '提示';
    modalMessage.textContent = message || '';
    
    // 重置状态
    modal.style.display = 'flex';
    modal.classList.remove('hide', 'show');
    
    // 防止背景滚动
    document.body.style.overflow = 'hidden';
    
    // 强制重排，确保过渡效果能正确触发
    void modal.offsetWidth;
    
    // 添加显示类
    modal.classList.add('show');
    
    // 关闭弹窗的通用函数
    function closeModal() {
      // 添加隐藏类
      modal.classList.remove('show');
      modal.classList.add('hide');
      
      // 动画完成后恢复背景滚动和隐藏弹窗
      setTimeout(() => {
        modal.style.display = 'none';
        document.body.style.overflow = '';
      }, 300); // 与CSS过渡时间一致
    }
    
    // 关闭按钮事件
    modalCloseBtn.onclick = function() {
      closeModal();
    };
    
    // 点击背景关闭弹窗
    modal.onclick = function(event) {
      if (event.target === modal) {
        closeModal();
      }
    };
    
    // 按ESC键关闭弹窗
    document.addEventListener('keydown', function escHandler(event) {
      if (event.key === 'Escape') {
        closeModal();
        document.removeEventListener('keydown', escHandler);
      }
    });
  }

  // 过时提示函数
  function outdate(event) {
    event.preventDefault();
    showModal('提示', '抱歉，此服务已下线');
  }

  // 国际版访问函数
  function allowintime(event, targetUrl) {
      window.location.href = targetUrl;
  }

  // 处理快捷方式URL参数
  function handleShortcuts() {
    const urlParams = new URLSearchParams(window.location.search);
    const app = urlParams.get('app');
    
    if (app === 'homemoney') {
      window.open('http://192.168.0.197:3010', '_blank');
    } else if (app === 'chrysorrhoe') {
      window.open('http://192.168.0.197:3100', '_blank');
    } else if (app === 'inventory') {
      window.open('http://192.168.0.197:5000', '_blank');
    }
  }
</script>
